{"version":3,"sources":["renderers/JSONItem/JSONItem.jsx","renderers/GridCollection/GridCollection.jsx","renderers/WordCloudItem/WordCloud.jsx","renderers/ListCollection/ListCollection.jsx","components/pagination/Pagination.jsx","config.js","utils.js","components/ErrorPane.js","components/CollectionView.jsx","components/ItemView.jsx","custom/NarrationsThumbnail.js","custom/NarrationsApp.js","custom/NarrationsItem.js","index.js"],"names":["JSONItem","item","useState","cardWidth","setCardWidth","card","useRef","useEffect","current","offsetWidth","smallCard","ref","className","id","elevation","Elevation","TWO","interactive","JSON","stringify","data","GridCollection","items","itemRenderer","ItemRenderer","length","map","to","style","textDecoration","getAllStringWordCounts","str","excludedWords","vals","words","split","filter","word","isNaN","parseFloat","char","toLowerCase","indexOf","replace","getAllObjectValWordCounts","dict","excludedKeys","keys","Object","key","val","recursedVals","recursedKeys","rKey","strData","String","strCounts","strKeys","sKey","WordCloud","ListCollection","Pagination","page","totalPages","setPage","CELL_MID_LEN","Math","floor","MAX_CELLS","pages","number","ellipsis","i","forEach","p","active","isLeftArrowEnabled","isRightArrowEnabled","getPagination","large","disabled","onClick","icon","text","intent","Intent","PRIMARY","DEFAULT","config","getHostname","port","window","location","protocol","hostname","origin","ErrorPane","error","React","hide","setHide","errorType","type","console","color","minimal","CollectionView","collectionRenderer","CollectionRenderer","pagination","resultsPerPage","filters","setFilters","filtersBuffer","setFiltersBuffer","filterTimeout","setFilterTimeout","useMephistoReview","isFinished","isLoading","mode","setFiltersAndResetPage","filtersStr","setFiltersImmediately","clearTimeout","searchButton","round","fixedToTop","align","Alignment","CENTER","content","placement","LEFT","leftIcon","onChange","event","target","value","setTimeout","onKeyDown","placeholder","rightElement","href","AppToaster","Toaster","create","position","Position","TOP","ItemView","wrapClass","allowReview","useParams","taskId","submit","history","useHistory","confirmReview","push","show","message","reviewError","buttonDisable","hideReviewWorkflow","RIGHT","a","result","response","getKeyWords","payload","counts","entries","sort","firstValue","slice","NarrationsThumbnail","info","isError","setError","fontSize","uid","role","onError","e","onerror","src","img","alt","width","marginRight","fontStyle","display","Viewer","file","useTimePoint","taxonomy","segData","d","seg","start_time","rest","end_time","mapToTimePoint","progress","setProgress","duration","setDuration","playing","setPlaying","vidRef","activeAnnotations","Segment","segment","seekTo","WARNING","marginBottom","whiteSpace","url","controls","progressInterval","log","onProgress","playedSeconds","onDuration","isActive","tabIndex","toFixed","padStart","marginLeft","label","tags","marginTop","fontFamily","s","idx","backgroundColor","border","borderRadius","padding","App","NarrationsItem","ReactDOM","render","StrictMode","path","document","getElementById"],"mappings":"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","file":"static/js/main.9fedd964.chunk.js","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport { H6, Card, Elevation } from \"@blueprintjs/core\";\nimport \"./JSONItem.css\";\n\nfunction JSONItem({ item }) {\n  const SMALL_CARD_WIDTH_LIMIT = 1000;\n  const [cardWidth, setCardWidth] = useState(0);\n  const card = useRef();\n\n  useEffect(() => {\n    setCardWidth(card.current.offsetWidth);\n  }, []);\n\n  const smallCard = cardWidth < SMALL_CARD_WIDTH_LIMIT;\n\n  return (\n    <div\n      ref={card}\n      className=\"json-item-renderer\"\n      id={`item-view-${item && item.id}`}\n    >\n      <Card\n        elevation={Elevation.TWO}\n        interactive={smallCard}\n        className=\"json-item-card\"\n      >\n        <pre\n          className={\n            smallCard\n              ? \"json-item-renderer-pre small\"\n              : \"json-item-renderer-pre\"\n          }\n        >\n          {JSON.stringify(item && item.data)}\n        </pre>\n        <H6>\n          <b>ID: {item && item.id}</b>\n        </H6>\n      </Card>\n    </div>\n  );\n}\n\nexport { JSONItem };\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { JSONItem } from \"../JSONItem\";\nimport \"./GridCollection.css\";\n\nfunction GridCollection({ items, itemRenderer: ItemRenderer = JSONItem }) {\n  return items && items.length > 0 ? (\n    <div className=\"default-collection-renderer-container\">\n      {items.map((item) => {\n        return (\n          <Link\n            to={`/${item.id}`}\n            style={{ textDecoration: \"none\" }}\n            key={item.id}\n            id={`item-${item.id}`}\n          >\n            <ItemRenderer item={item} />\n          </Link>\n        );\n      })}\n    </div>\n  ) : null;\n}\n\nexport { GridCollection };\n","import React from \"react\";\nimport \"./WordCloud.css\";\n\n//returns an object with a count for all words seperated by spaces in a string, punctuation is removed\nconst getAllStringWordCounts = (str, excludedWords = []) => {\n  //object to be indexed by string words mapped to integer word counts\n  var vals = {};\n  //separate string into array of space separated words, excluded words are ignored\n  var words = str.split(\" \").filter((word) => {\n    if (!word || word === \"\" || word.length === 1) return false;\n    if (!isNaN(parseFloat(str))) return false;\n    for (const char of excludedWords) {\n      if (word.toLowerCase().indexOf(char.toLowerCase()) > -1) return false;\n    }\n    return true;\n  });\n  //remove punctuation from all words\n  words = words.map((word) => word.replace(/[.,/#!$%^&*;:{}=\\-_`~()]/g, \"\"));\n  //count words\n  for (let word of words) {\n    if (word in vals) {\n      vals[word] += 1;\n    } else {\n      vals[word] = 1;\n    }\n  }\n  return vals;\n};\n\n//recursively iterates the values of an object and counts the occurence of space separated words in string values\nconst getAllObjectValWordCounts = (\n  dict,\n  excludedWords = [],\n  excludedKeys = []\n) => {\n  //object to be indexed by string words mapped to integer word counts\n  let vals = {};\n  //get all keys for an object, ignoring excluded keys\n  const keys = Object.keys(dict).filter((key) => {\n    for (const filter of excludedKeys) {\n      if (key === filter) return false;\n    }\n    return true;\n  });\n\n  for (let key of keys) {\n    let val = dict[key];\n    //if value of key is empty skip\n    if (!val || val === \"\") continue;\n    if (typeof val === \"object\") {\n      //if value is object, recurse into the object\n      const recursedVals = getAllObjectValWordCounts(\n        val,\n        excludedWords,\n        excludedKeys\n      );\n      //get keys from recursed word counts\n      const recursedKeys = Object.keys(recursedVals);\n      //merge word counts into parent count\n      for (let rKey of recursedKeys) {\n        if (rKey in vals) {\n          vals[rKey] = recursedVals[rKey] + vals[rKey];\n        } else {\n          vals[rKey] = recursedVals[rKey];\n        }\n      }\n    } else if (typeof val === \"string\") {\n      //if value of key is string, get all word counts of string\n      const strData = String(val);\n      const strCounts = getAllStringWordCounts(strData, excludedWords);\n      //get keys from word count\n      const strKeys = Object.keys(strCounts);\n      //merge word counts into parent count\n      for (let sKey of strKeys) {\n        if (sKey in vals) {\n          vals[sKey] = strCounts[sKey] + vals[sKey];\n        } else {\n          vals[sKey] = strCounts[sKey];\n        }\n      }\n    }\n  }\n  return vals;\n};\n\n/*\n  For a given object or string, generates a paragraph filled with different sized and weighted spans of words based on the frequency of occurrence in the object or string\n  More frequently occurring words will be sized larger with larger font weighting as well\n  The object or string to be parsed must be passed in a property named 'data'\n  Objects will be traversed recursively for all attributes in string form, all strings in the object or passed in through params will be parsed for space separated words.\n  Words can be excluded by passing a property named \"excludedWords\" which must be an array of strings\n  Keys in a object can be excluded by passing a property named \"excludedKeys\" which must be an array of strings\n  Maximum font size in EM units can be set by passing a maxFontEmSize property\n  Minimum font size in EM units can be set by passing a minFontEmSize property\n  Maximum font weight can be set by passing a maxFontWeight property\n  Minimum font weight can be set by passing a minFontWeight property\n*/\nfunction WordCloud({\n  data,\n  minFontEmSize = 0.4,\n  maxFontEmSize = 1.25,\n  minFontWeight = 200,\n  maxFontWeight = 600,\n  excludedWords = [],\n  excludedKeys = [],\n  style,\n}) {\n  if (!data || data === {}) return <p>No Data Available</p>;\n\n  //maps number from given range to a new range\n  const scaleNumber = (num, inMin, inMax, outMin, outMax, round) => {\n    return round === true\n      ? Math.ceil(\n          ((num - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin\n        )\n      : ((num - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin;\n  };\n\n  //reduces deviations between word counts given input of an object representing string words mapped to word count integers\n  // and maps word counts to em font sizes\n  const scaleEntries = (wordDict) => {\n    //get all words recorded\n    var words = Object.keys(wordDict);\n    //if empty, abort\n    if (!words || words.length === 0) return {};\n    //find min and max of all words\n    var values = Object.values(wordDict);\n    var maxVal = Math.max.apply(Math, values);\n    var minVal = Math.min.apply(Math, values);\n\n    if (maxVal - minVal > 10) {\n      //if difference between max and min word counts are over 10 remove all min counts\n      for (const word of words) {\n        if (wordDict[word] === minVal) delete wordDict[word];\n      }\n\n      //recalculate words, values, min and max\n      words = Object.keys(wordDict);\n      values = Object.values(wordDict);\n      maxVal = Math.max.apply(Math, values);\n      minVal = Math.min.apply(Math, values);\n    }\n\n    //calculate average word count\n    var sum = 0;\n    for (const word of words) {\n      sum += wordDict[word];\n    }\n    const avg = Math.ceil(sum / words.length);\n\n    //set maximum accepted word count to difference between average and smallest value in list\n    const diff = avg - minVal;\n    const maxRange = avg + diff;\n\n    //reduce all values over maximum accepted word count to the maximum accepted word count\n    for (const word of words) {\n      wordDict[word] = Math.min(wordDict[word], maxRange);\n    }\n\n    //maps word counts to em font sizes\n    for (const word of words) {\n      wordDict[word] = scaleNumber(\n        wordDict[word],\n        1,\n        maxRange,\n        minFontEmSize,\n        maxFontEmSize\n      );\n    }\n    return wordDict;\n  };\n\n  //get all word counts\n  var wordCounts = {};\n  switch (typeof data) {\n    case \"object\":\n      wordCounts = getAllObjectValWordCounts(data, excludedWords, excludedKeys);\n      break;\n    case \"string\":\n      wordCounts = getAllStringWordCounts(data, excludedWords);\n      break;\n    default:\n      break;\n  }\n\n  //normalize word counts and map to em font sizes\n  wordCounts = scaleEntries(wordCounts);\n  const wordKeys = Object.keys(wordCounts);\n\n  //replace em font sizes in list with css styles for spans\n  for (const word of wordKeys) {\n    const size = wordCounts[word];\n    wordCounts[word] = {\n      fontSize: size + \"em\",\n      fontWeight: scaleNumber(\n        size,\n        minFontEmSize,\n        maxFontEmSize,\n        minFontWeight,\n        maxFontWeight,\n        true\n      ),\n    };\n  }\n\n  //map css styles to spans with corresponding word and populate paragraph with spans\n  return (\n    <div style={style} className=\"word-cloud\">\n      <p>\n        {wordKeys.map((word) => (\n          <span style={wordCounts[word]}>{\" \" + word + \" \"}</span>\n        ))}\n      </p>\n    </div>\n  );\n}\n\nexport default WordCloud;\n\nexport { getAllObjectValWordCounts, getAllStringWordCounts };\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Card, Divider } from \"@blueprintjs/core\";\nimport ListItem from \"./ListItem\";\nimport \"./ListCollection.css\";\n\n/*\n  EXAMPLE PLUGIN ALL DATA RENDERER\n  Displays all mephisto review data as a list\n*/\nfunction ListCollection({ items, itemRenderer: Renderer = ListItem }) {\n  return items && items.length > 0 ? (\n    <Card className=\"list-view-renderer-container\">\n      {items.map((item, index) => (\n        <>\n          {index !== 0 ? <Divider /> : null}\n          <Link\n            to={`/${item.id}`}\n            style={{ textDecoration: \"none\" }}\n            key={item.id}\n          >\n            <div\n              className={\n                index !== 0\n                  ? \"list-view-renderer-item divider\"\n                  : \"list-view-renderer-item\"\n              }\n            >\n              <Renderer item={item} />\n            </div>\n          </Link>\n        </>\n      ))}\n    </Card>\n  ) : null;\n}\n\nexport default ListCollection;\n","import React from \"react\";\nimport { Button, Icon, Intent } from \"@blueprintjs/core\";\nimport \"./Pagination.css\";\n\n/*\n * Creates pagination buttons based on the total number of pages to be paginated as well as the active page.\n * The setPage parameter allows the component to change the page state in its parent component.\n */\n\nfunction getPagination(page, totalPages) {\n  //how many buttons are allowed to be displayed between the next and last page buttons\n  const MAX_CELLS = 7;\n  //middle entry of the buttons is the floor of half of the max\n  const CELL_MID_LEN = Math.floor(MAX_CELLS / 2);\n\n  /*stores the attributes of the buttons to be displayed\n   * The term ellipsis in objects stored in this array refers to series of page numbers condensed into a single \"...\" button\n   * The term number in objects stored in this array refers to the page number of the button if the button is not an ellipsis\n   */\n  let pages = [];\n\n  if (totalPages > MAX_CELLS) {\n    //if there are more pages than the maximum buttons we can display, calculate where to place ellipis\n\n    //start by populating the first and last two buttons in the display with their page numbers\n    pages[0] = { number: 1 };\n    pages[1] = { number: 2 };\n    pages[MAX_CELLS - 2] = { number: totalPages - 1 };\n    pages[MAX_CELLS - 1] = { number: totalPages };\n\n    if (page <= CELL_MID_LEN) {\n      /*\n       * if active page is less than or equal to the middle entry of the display\n       * place ellipsis before the last button and populate the cells from the first button on\n       */\n      pages[MAX_CELLS - 2].ellipsis = true;\n      for (let i = 2; i < MAX_CELLS - 2; i++) {\n        pages[i] = { number: i + 1 };\n      }\n    } else if (totalPages - page < CELL_MID_LEN) {\n      /*\n       * else if the distance from active page to the last page is less than the middle entry of the display\n       * place ellipsis after the first button and populate the cells from the last button prior\n       */\n      pages[1].ellipsis = true;\n      for (let i = 2; i < MAX_CELLS - 2; i++) {\n        pages[i] = { number: totalPages - MAX_CELLS + i + 1 };\n      }\n    } else {\n      /*\n       * otherwise the active page must be too far away from first and last buttons and two ellipsis must be placed on either side of the active pages\n       * cells are populated assuming the middle button is the active page\n       */\n      pages[1].ellipsis = true;\n      pages[MAX_CELLS - 2].ellipsis = true;\n\n      pages[CELL_MID_LEN] = { number: page };\n      for (let i = 1; i < MAX_CELLS - 5; i++) {\n        pages[CELL_MID_LEN + i] = { number: page + i };\n        pages[CELL_MID_LEN - i] = { number: page - i };\n      }\n    }\n  } else {\n    //If there are less pages than the max no ellipsis is needed and all buttons can be populated normally\n    for (let i = 0; i < totalPages; i++) {\n      pages[i] = { number: i + 1, ellipsis: false };\n    }\n  }\n\n  //set active flag for active page\n  pages.forEach((p) => {\n    if (p.number === page) p.active = true;\n  });\n\n  //if at last page disable going forward and if at first page disable going back\n  const isLeftArrowEnabled = page > 1;\n  const isRightArrowEnabled = page < totalPages;\n\n  return {\n    pages,\n    isLeftArrowEnabled,\n    isRightArrowEnabled,\n  };\n}\n\nfunction Pagination({ page = 1, totalPages = 1, setPage = () => {} }) {\n  const { pages, isLeftArrowEnabled, isRightArrowEnabled } = getPagination(\n    page,\n    totalPages\n  );\n\n  return (\n    <div className=\"bp3-button-group pagination\">\n      <Button\n        large={true}\n        disabled={!isLeftArrowEnabled}\n        onClick={() => setPage(page - 1)}\n        id=\"pagination-button-left\"\n      >\n        <Icon icon=\"chevron-left\" />\n      </Button>\n      {pages.map((p) => (\n        <Button\n          large={true}\n          text={p.ellipsis ? \"...\" : p.number}\n          key={p.number}\n          disabled={p.ellipsis}\n          intent={p.active ? Intent.PRIMARY : Intent.DEFAULT}\n          onClick={() => setPage(p.number)}\n        />\n      ))}\n      <Button\n        large={true}\n        disabled={!isRightArrowEnabled}\n        onClick={() => setPage(page + 1)}\n        id=\"pagination-button-right\"\n      >\n        <Icon icon=\"chevron-right\" />\n      </Button>\n    </div>\n  );\n}\n\nexport default Pagination;\n","const config = {\n  /*\n    The port that useMephistoReview() in the browser will connect to the\n    server on.\n\n    Tip: This is useful when developing on the review interface locally so UI changes\n    don't require you to kill and relaunch the server each time.\n    You can launch `$ mephisto review <some_placeholder_dir> --port 9000` once to launch\n    the review server fed in with the appropriate data source, and then instead of using\n    the interface at <some_placeholder_dir>, you can run `npm start` to get a\n    live-reloading developer build server.\n    */\n  // port: 3030,\n};\n\nexport default config;\n","import config from \"./config\";\n\nfunction getHostname() {\n  return config.port\n    ? `${window.location.protocol}//${window.location.hostname}:${config.port}`\n    : window.location.origin;\n}\n\nexport { getHostname };\n","import React from \"react\";\nimport { Button, Icon } from \"@blueprintjs/core\";\n\nfunction ErrorPane({ error }) {\n  const [hide, setHide] = React.useState(false);\n  const errorType = error && error.type;\n  React.useEffect(() => {\n    if (!error) return;\n    console.error(error);\n  }, [error, errorType]);\n  return (\n    error &&\n    !hide && (\n      <div className=\"error item-view-error\">\n        <Button\n          icon={<Icon icon=\"cross\" color=\"white\" />}\n          minimal\n          onClick={() => setHide(true)}\n        />\n        Error [{error.type}] &mdash; {JSON.stringify(error.error)}\n      </div>\n    )\n  );\n}\n\nexport default ErrorPane;\n","import React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { useMephistoReview } from \"mephisto-review-hook\";\nimport {\n  InputGroup,\n  Button,\n  Navbar,\n  NavbarGroup,\n  NavbarDivider,\n  NavbarHeading,\n  Alignment,\n} from \"@blueprintjs/core\";\nimport { Tooltip } from \"@blueprintjs/core\";\nimport { GridCollection, JSONItem } from \"../renderers\";\nimport { Pagination } from \"./pagination\";\nimport { getHostname } from \"../utils\";\nimport ErrorPane from \"./ErrorPane\";\n\nfunction CollectionView({\n  itemRenderer = JSONItem,\n  collectionRenderer: CollectionRenderer = GridCollection,\n  pagination = true,\n  resultsPerPage = 12,\n}) {\n  const [page, setPage] = useState(pagination ? 1 : null);\n  const [filters, setFilters] = useState(\"\");\n  const [filtersBuffer, setFiltersBuffer] = useState(\"\");\n  const [filterTimeout, setFilterTimeout] = useState(null);\n\n  const { data, isFinished, isLoading, error, mode, totalPages } =\n    useMephistoReview({\n      page,\n      resultsPerPage,\n      filters,\n      hostname: getHostname(),\n    });\n\n  const setFiltersAndResetPage = (filtersStr) => {\n    if (page !== null && page !== 1) setPage(1);\n    setFilters(filtersStr);\n  };\n\n  const delaySetFilters = (filtersStr) => {\n    setFiltersBuffer(filtersStr);\n    if (filterTimeout) {\n      clearTimeout(filterTimeout);\n    }\n    setFilterTimeout(\n      setTimeout(() => {\n        setFiltersAndResetPage(filtersStr);\n      }, 3000)\n    );\n  };\n\n  const setFiltersImmediately = () => {\n    if (filterTimeout) {\n      clearTimeout(filterTimeout);\n    }\n    setFiltersAndResetPage(filtersBuffer);\n  };\n\n  const searchButton = (\n    <Button\n      id=\"mephisto-search-button\"\n      round={true}\n      onClick={setFiltersImmediately}\n    >\n      Search\n    </Button>\n  );\n\n  if (mode === \"OBO\") return <Redirect to={`/${data && data.id}`} />;\n  return (\n    <>\n      <Navbar fixedToTop={true}>\n        <div className=\"navbar-wrapper\">\n          <NavbarGroup className=\"navbar-header\">\n            <NavbarHeading>\n              <b>\n                <pre>mephisto review</pre>\n              </b>\n            </NavbarHeading>\n          </NavbarGroup>\n          <NavbarGroup align={Alignment.CENTER}>\n            <Tooltip\n              content=\"Separate multiple filters with commas\"\n              placement={Alignment.LEFT}\n            >\n              <InputGroup\n                id=\"mephisto-search\"\n                className=\"all-item-view-search-bar\"\n                leftIcon=\"search\"\n                onChange={(event) => delaySetFilters(event.target.value)}\n                onKeyDown={(event) => {\n                  if (event.key === \"Enter\") setFiltersImmediately();\n                }}\n                placeholder=\"Filter data...\"\n                value={filtersBuffer}\n                rightElement={searchButton}\n              />\n            </Tooltip>\n          </NavbarGroup>\n        </div>\n      </Navbar>\n      <main className={`all-item-view mode-${mode}`} id=\"all-item-view-wrapper\">\n        <div className=\"item-dynamic\">\n          <ErrorPane error={error} />\n          {isLoading ? (\n            <h1 className=\"all-item-view-message\">Loading...</h1>\n          ) : isFinished ? (\n            <h1 className=\"all-item-view-message\">\n              Done reviewing! You can close this app now\n            </h1>\n          ) : data && data.length > 0 ? (\n            <>\n              <CollectionRenderer items={data} itemRenderer={itemRenderer} />\n              {pagination && totalPages > 1 ? (\n                <Pagination\n                  totalPages={totalPages}\n                  page={page}\n                  setPage={setPage}\n                />\n              ) : null}\n            </>\n          ) : (\n            <div className=\"all-item-view-message all-item-view-no-data\">\n              <h3>\n                Thanks for using the <code>$ mephisto review</code> interface.\n                Here are a few ways to get started:\n              </h3>\n              <h3>\n                1. Review data from a .csv or{\" \"}\n                <a href=\"https://jsonlines.org/\">.jsonl</a> file\n              </h3>\n              <pre>\n                $ cat sample-data<span className=\"highlight\">.json</span> |\n                mephisto review review-app/build/{\" \"}\n                <span className=\"highlight\">--json</span> --all --stdout\n              </pre>\n              <pre>\n                $ cat sample-data<span className=\"highlight\">.csv</span> |\n                mephisto review review-app/build/{\" \"}\n                <span className=\"highlight\">--csv</span> --all --stdout\n              </pre>\n              <h3>2. Review data from the Mephisto database</h3>\n              <pre>\n                $ mephisto review review-app/build/{\" \"}\n                <span className=\"highlight\">--db mephisto_db_task_name</span>{\" \"}\n                --all --stdout\n              </pre>\n            </div>\n          )}\n        </div>\n      </main>\n    </>\n  );\n}\n\nexport default CollectionView;\n","import React from \"react\";\nimport { useMephistoReview } from \"mephisto-review-hook\";\nimport { useParams, useHistory, Link } from \"react-router-dom\";\nimport {\n  Button,\n  Navbar,\n  NavbarGroup,\n  NavbarDivider,\n  NavbarHeading,\n  Alignment,\n  Position,\n  Toaster,\n} from \"@blueprintjs/core\";\nimport { JSONItem } from \"../renderers/JSONItem\";\nimport { getHostname } from \"../utils\";\nimport ErrorPane from \"./ErrorPane\";\n\nconst AppToaster = Toaster.create({\n  className: \"recipe-toaster\",\n  position: Position.TOP,\n});\n\nfunction ItemView({\n  itemRenderer: ItemRenderer = JSONItem,\n  wrapClass,\n  allowReview = true,\n}) {\n  const { id } = useParams();\n  const {\n    data: item,\n    isFinished,\n    isLoading,\n    submit,\n    error,\n    mode,\n  } = useMephistoReview({ taskId: id, hostname: getHostname() });\n\n  const history = useHistory();\n\n  const confirmReview = () => {\n    if (mode === \"OBO\") {\n      history.push(\"/\");\n    } else {\n      AppToaster.show({ message: \"Review response recorded.\" });\n    }\n  };\n\n  const reviewError = (error) => {\n    AppToaster.show({ message: `ERROR: ${error}` });\n  };\n\n  const buttonDisable = error || isFinished || isLoading || item == null;\n\n  const hideReviewWorkflow = !allowReview && mode === \"ALL\";\n\n  return (\n    <>\n      <Navbar fixedToTop={true}>\n        <div className=\"navbar-wrapper\">\n          <NavbarGroup>\n            {mode === \"ALL\" ? (\n              <>\n                <Link to=\"/\" style={{ textDecoration: \"none\" }}>\n                  <Button intent=\"primary\" icon=\"caret-left\" id=\"home-button\">\n                    <b>Mephisto Review</b>\n                  </Button>\n                </Link>\n                <NavbarDivider />\n              </>\n            ) : null}\n            <NavbarHeading className=\"navbar-header\">\n              {hideReviewWorkflow ? (\n                <b>Viewing task:</b>\n              ) : (\n                <b>Please review the following item:</b>\n              )}\n            </NavbarHeading>\n          </NavbarGroup>\n          {hideReviewWorkflow ? null : (\n            <NavbarGroup align={Alignment.RIGHT}>\n              <Button\n                className=\"btn\"\n                intent=\"danger\"\n                disabled={buttonDisable}\n                id=\"reject-button\"\n                onClick={async () => {\n                  var response = await submit({ result: \"rejected\" });\n                  if (response === \"SUCCESS\") {\n                    confirmReview();\n                  } else if (response) {\n                    reviewError(response);\n                  }\n                }}\n              >\n                <b>REJECT</b>\n              </Button>\n              <Button\n                className=\"btn\"\n                intent=\"success\"\n                disabled={buttonDisable}\n                id=\"approve-button\"\n                onClick={async () => {\n                  var response = await submit({ result: \"approved\" });\n                  if (response === \"SUCCESS\") {\n                    confirmReview();\n                  } else if (response) {\n                    reviewError(response);\n                  }\n                }}\n              >\n                <b>APPROVE</b>\n              </Button>\n            </NavbarGroup>\n          )}\n        </div>\n      </Navbar>\n      <main className={`item-view mode-${mode}`}>\n        {isLoading ? (\n          <div className=\"item-dynamic\">\n            <ErrorPane error={error} />\n            <h1 className=\"item-view-message\">Loading...</h1>\n          </div>\n        ) : isFinished ? (\n          <div className=\"item-dynamic\">\n            <ErrorPane error={error} />\n            <h1 className=\"item-view-message\">\n              Done reviewing! You can close this app now\n            </h1>\n          </div>\n        ) : item ? (\n          wrapClass ? (\n            <div className={wrapClass}>\n              <ErrorPane error={error} />\n              <ItemRenderer item={item} />\n            </div>\n          ) : (\n            <>\n              <ErrorPane error={error} />\n              <ItemRenderer item={item} />\n            </>\n          )\n        ) : (\n          <div className=\"item-dynamic\">\n            <div className=\"item-view-message item-view-no-data\">\n              <ErrorPane error={error} />\n              <h3>\n                Thanks for using the <code>$ mephisto review</code> interface.\n                Here are a few ways to get started:\n              </h3>\n              <h3>\n                1. Review data from a .csv or{\" \"}\n                <a href=\"https://jsonlines.org/\">.jsonl</a> file\n              </h3>\n              <pre>\n                $ cat sample-data<span className=\"highlight\">.json</span> |\n                mephisto review review-app/build/{\" \"}\n                <span className=\"highlight\">--json</span> --stdout\n              </pre>\n              <pre>\n                $ cat sample-data<span className=\"highlight\">.csv</span> |\n                mephisto review review-app/build/{\" \"}\n                <span className=\"highlight\">--csv</span> --stdout\n              </pre>\n              <h3>2. Review data from the Mephisto database</h3>\n              <pre>\n                $ mephisto review review-app/build/{\" \"}\n                <span className=\"highlight\">--db mephisto_db_task_name</span>{\" \"}\n                --stdout\n              </pre>\n            </div>\n          </div>\n        )}\n      </main>\n    </>\n  );\n}\n\nexport default ItemView;\n","import React from \"react\";\nimport { H6, Card, Elevation } from \"@blueprintjs/core\";\nimport { getHostname } from \"../utils\";\nimport { getAllObjectValWordCounts } from \"../renderers/WordCloudItem/WordCloud\";\n\nfunction NarrationsThumbnail({ item }) {\n  const data = item.data;\n  const payload = data.info.payload;\n\n  const [isError, setError] = React.useState(false);\n\n  return (\n    <div className=\"json-item-renderer\">\n      <Card\n        elevation={Elevation.TWO}\n        interactive={true}\n        className=\"json-item-card\"\n      >\n        <p style={{ fontSize: 12 }}>\n          {data.uid} &mdash; {payload.length} entries\n        </p>\n        <img\n          role=\"presentation\"\n          onError={(e) => {\n            // console.log(e);\n            e.target.onerror = null;\n            // e.target.src = \"image_path_here\";\n            setError(true);\n          }}\n          src={\n            data.img && !isError\n              ? getHostname() + data.img\n              : \"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"\n          }\n          alt=\"Thumbnail\"\n          style={{ width: data.img ? \"100%\" : \"1px\" }}\n        />\n        {/* {JSON.stringify(payload[0].label)} */}\n        <p>\n          {getKeyWords(payload).map((word) => (\n            <span\n              style={{\n                marginRight: \"1em\",\n                fontStyle: \"italic\",\n                display: \"inline-block\",\n              }}\n              key={word}\n            >\n              #{word}\n            </span>\n          ))}\n        </p>\n      </Card>\n    </div>\n  );\n}\n\nfunction getKeyWords(payload) {\n  const counts = getAllObjectValWordCounts(\n    payload,\n    [\n      \"C\",\n      \"the\",\n      \"be\",\n      \"of\",\n      \"from\",\n      \"to\",\n      \"and\",\n      \"a\",\n      \"in\",\n      \"that\",\n      \"have\",\n      \"it\",\n      \"for\",\n      \"not\",\n      \"on\",\n      \"with\",\n      \"by\",\n      \"his\",\n      \"her\",\n      \"up\",\n      \"down\",\n    ],\n    [\"id\"]\n  );\n  const mostCommonWords = Object.entries(counts).sort(\n    ([firstKey, firstValue], [secondKey, secondValue]) =>\n      secondValue - firstValue\n  );\n  return mostCommonWords.slice(0, 10).map(([word, _count]) => word);\n}\n\nexport default NarrationsThumbnail;\n","import React from \"react\";\nimport ReactPlayer from \"react-player\"; /* dependency */\nimport { getHostname } from \"../utils\";\nimport { Callout, Intent } from \"@blueprintjs/core\";\n\nimport \"./NarrationsApp.css\";\nconst USE_MOCK = false;\n\nconst samplePayloadForInstructions = {\n  file: \"https://video.cdn.net/sample_url_a3cda33df8.mp4\",\n  info: {\n    type: \"TIME_SEGMENTATION\",\n    role: \"RESULT\",\n    payload: [\n      {\n        start_time: 168.032,\n        end_time: 168.032,\n        label:\n          \"C was in a kitchen. C cooked in a pot with a wooden ladle. C sliced some veggies with a knife. #Summary. \",\n      },\n      {\n        start_time: 0.70267,\n        end_time: 0.70267,\n        label: \"#C C moves a nylon by a kitchen rack with his hands \",\n      },\n    ],\n  },\n  taxonomy: \"narration\",\n};\n\nfunction mapToTimePoint(seg, useTimePoint) {\n  if (!useTimePoint) {\n    return seg;\n  }\n  const { start_time, end_time, ...rest } = seg;\n  return { start_time, end_time: start_time + 1, ...rest };\n}\n\nfunction App({ data }) {\n  return <Viewer data={data} />;\n}\n\nfunction parsePayload(cb) {\n  let parsedData;\n  try {\n    let input = prompt(\n      \"Enter a payload to view:\\n(Ensure formatting is correct, e.g. all keys are enclosed with quotes)\\n\\nSample:\\n\" +\n        JSON.stringify(samplePayloadForInstructions, null, 2)\n    );\n    parsedData = JSON.parse(input);\n    console.log(\"data parsed!\", parsedData);\n  } catch (e) {\n    console.log(\"data parse failed!\");\n    alert(JSON.stringify(e.toString()));\n    parsedData = undefined;\n  }\n  cb(parsedData);\n}\n\nfunction Viewer({ data }) {\n  //   const [taskData, setTaskData] = React.useState(undefined);\n  //   const fullMock = {\n  //     data: taskData || {\n  //       file: \"https://interncache-rva.fbcdn.net/v/t53.39266-7/10000000_206988614366921_5057087031069697290_n.mp4?ccb=2&_nc_sid=5f5f54&efg=eyJ1cmxnZW4iOiJwaHBfdXJsZ2VuX2NsaWVudC9pbnRlcm4vc2l0ZS94L2ZiY2RuIn0%3D&_nc_ht=interncache-rva&_nc_rmd=260&oh=0bcbce9155e15ed4d9a16a904bf125ae&oe=603C6521\",\n  //       info: mockData,\n  //     },\n  //     isFinished: false,\n  //     isLoading: false,\n  //   };\n  //   let { data, isFinished, isLoading, submit, error } = useMephistoReview({\n  //     useMock: USE_MOCK || !!taskData,\n  //     mock: fullMock,\n  //   });\n\n  const file = getHostname() + data?.file;\n  const useTimePoint = data?.taxonomy === \"narration\";\n  const segData =\n    data?.info?.payload.map((d) => mapToTimePoint(d, useTimePoint)) || [];\n\n  const [progress, setProgress] = React.useState(null);\n  const [duration, setDuration] = React.useState(null);\n  const [playing, setPlaying] = React.useState(false);\n  const vidRef = React.useRef();\n\n  const [isError, setError] = React.useState(false);\n\n  const activeAnnotations = segData\n    .filter(\n      (seg) =>\n        progress >= seg.start_time - 0.5 && progress <= seg.end_time + 0.5\n    )\n    .map((seg) => (\n      <Segment\n        segment={seg}\n        duration={duration}\n        progress={progress}\n        onClick={() => {\n          vidRef?.current && vidRef.current.seekTo(seg.start_time, \"seconds\");\n          setPlaying(true);\n        }}\n      />\n    ));\n\n  return (\n    <div>\n      <div className=\"app-container\">\n        <div className=\"video-viewer\">\n          {isError ? (\n            <Callout intent={Intent.WARNING} style={{ marginBottom: 10 }}>\n              The video was not found. You may not have it downloaded. You can\n              try downloading it with the Ego4D cli:\n              <pre style={{ whiteSpace: \"break-spaces\" }}>\n                python -m ego4d.cli.cli --yes --datasets full_scale\n                --output_directory $OUTPUT_DIR --video_uids {data.uid}\n              </pre>\n            </Callout>\n          ) : null}\n          <ReactPlayer\n            url={file}\n            controls\n            playing={playing}\n            ref={vidRef}\n            width={\"100%\"}\n            progressInterval={350}\n            onError={(error) => {\n              console.log(error);\n              setError(true);\n            }}\n            onProgress={({ playedSeconds }) => {\n              setProgress(playedSeconds);\n            }}\n            onDuration={setDuration}\n          />\n          {/* <h3>{Math.floor(progress * 10) / 10}</h3>\n            <h3>{duration}</h3> */}\n          <h3>Active annotations:</h3>\n          {activeAnnotations.length > 0 ? activeAnnotations : <span>None</span>}\n        </div>\n        <div className=\"segment-viewer\">\n          <h3>All annotations:</h3>\n          {segData.map((seg) => (\n            <Segment\n              useTimePoint={useTimePoint}\n              segment={seg}\n              duration={duration}\n              isActive={progress >= seg.start_time && progress <= seg.end_time}\n              onClick={() => {\n                vidRef?.current &&\n                  vidRef.current.seekTo(seg.start_time, \"seconds\");\n                setPlaying(true);\n              }}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction Segment({\n  segment,\n  onClick,\n  duration,\n  isActive = false,\n  useTimePoint,\n}) {\n  return (\n    <div\n      className={\"segment-wrapper \" + (isActive ? \"active\" : \"inactive\")}\n      onClick={onClick}\n      onKeyDown={onClick}\n      role=\"button\"\n      tabIndex={0}\n    >\n      {useTimePoint ? (\n        <div className=\"duration\">\n          <span>\n            {Math.floor(segment.start_time / 60)}:\n            {(segment.start_time % 60).toFixed(0).padStart(2, \"0\")}\n          </span>\n        </div>\n      ) : (\n        <div className=\"duration\">\n          <span>\n            {Math.floor(segment.start_time / 60)}:\n            {(segment.start_time % 60).toFixed(0).padStart(2, \"0\")}\n          </span>{\" \"}\n          &mdash;{\" \"}\n          <span>\n            {Math.floor(segment.end_time / 60)}:\n            {(segment.end_time % 60).toFixed(0).padStart(2, \"0\")}\n          </span>\n          &nbsp;({(segment.end_time - segment.start_time).toFixed(1)}s)\n        </div>\n      )}\n      <div className=\"track\">\n        {duration && (\n          <div\n            className=\"bar\"\n            style={{\n              width:\n                (100 * (segment.end_time - segment.start_time)) / duration +\n                \"%\",\n              marginLeft: (100 * segment.start_time) / duration + \"%\",\n            }}\n          ></div>\n        )}\n      </div>\n      <div className=\"segment\">{segment.label}</div>\n      {segment.tags?.length > 0 ? (\n        <div\n          className=\"segment\"\n          style={{ marginTop: 10, fontSize: 13, fontFamily: \"monospace\" }}\n        >\n          {segment.tags.map((s, idx) => (\n            <span\n              key={idx}\n              style={{\n                backgroundColor: \"#ccc\",\n                border: \"1px solid #aaa\",\n                borderRadius: 3,\n                display: \"inline-block\",\n                marginRight: 5,\n                marginBottom: 5,\n                padding: 3,\n              }}\n            >\n              {s || <span>&nbsp;</span>}\n            </span>\n          ))}\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport NarrationsApp from \"./NarrationsApp\";\n\nfunction NarrationsItem({ item }) {\n  const data = item.data;\n  const payload = data.info.payload;\n\n  return (\n    <div className=\"json-item-renderer\">\n      <NarrationsApp data={data} />\n    </div>\n  );\n}\n\nexport default NarrationsItem;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport CollectionView from \"./components/CollectionView\";\nimport ItemView from \"./components/ItemView\";\nimport \"normalize.css/normalize.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"./index.css\";\n\nimport { GridCollection, JSONItem, WordCloudItem } from \"./renderers\";\nimport NarrationsThumbnail from \"./custom/NarrationsThumbnail\";\nimport NarrationsItem from \"./custom/NarrationsItem\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Switch>\n        <Route path=\"/:id\">\n          {/* For more information see the 'Customization' section of the README.md file. */}\n          {/* <ItemView wrapClass=\"item-dynamic\" itemRenderer={JSONItem} /> */}\n          <ItemView itemRenderer={NarrationsItem} allowReview={false} />\n        </Route>\n        <Route path=\"/\">\n          {/* For more information see the 'Customization' section of the README.md file. */}\n          <CollectionView\n            collectionRenderer={GridCollection}\n            // itemRenderer={JSONItem}\n            itemRenderer={NarrationsThumbnail}\n            pagination={true}\n            resultsPerPage={12}\n          />\n        </Route>\n      </Switch>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}